---
title: 'Образ Города в тетралогии Л. Даррелла "Александрийский квартет"'
author: "Дарья Галкина"
date: "2024-12-22"
bibliography: bibliography.bib
---

```{=html}
<i>
<div style="text-align: center;">
Уведомление
</div>
<div style="text-align: center;">
Персонажи этой книги, первой из четырех, 
являются полностью вымышленными, 
как и личность рассказчика, и прототипов не имеют. 
Реален лишь город.
</div>
</i>
<div style="text-align: right;">
Л. Даррелл, "Жюстин"
</div>
```

Оговорюсь, что данное исследование не призвано открыть новую страницу в богатой истории трактовки романа. На мой взгляд, система образов - один из наиболее трудно формализуемых элементов художественного текста, поэтому её анализ остаётся прерогативой близкого чтения. Тем не менее, в данной работе предпринята попытка количественного анализа текста, в рамках которой я надеюсь прокомментировать некоторые из традиционных положений, выдвигаемых литературоведами в отношении образа города, а также оценить потенциал метода точной взаимной информации для изучения образной системы художественного текста.

#Ход работы

##Подготовка данных

Я пользовалась электронной копией романа (любезно предоставленной мне переводчиком для исследовательских целей), так как опубликованный после редакторских правок текст не доступен в открытом доступе и защищён авторским правом. Книги хранятся в формате ".docx" и, как показала пробная лемматизация, не нуждаются в глубокой очистке. Однако для приведения данных к опрятному формату унифицируем кавычки.

```{r, warning=FALSE, message=FALSE}
library(readtext)
library(tidyverse)
library(tidytext)
library(udpipe)
library(widyr)

file_paths <- c("Justine.docx", "Balthazar.docx", 
                "Mountolive.docx","Clea.docx")
names <- gsub(pattern = "\\.docx$", replacement = "", x = file_paths)

texts <- list()
for (doc in file_paths) {
  texts[[doc]] <- readtext(doc)$text
}


all_books <- tibble(
  Книга = names[], 
  Текст = unlist(texts))

unify_quotes <- function(text) {
  text <- str_replace_all(text, "[\u201C\u201D\u2018\u2019\u00AB\u00BB\"]", "\"")
  return(text)
}

all_books <- all_books |>
  mutate(Текст = unify_quotes(Текст))
```
Аннотируем все тексты при помощи модели "syntagrus" и сохраним некоторые знаменательные части речи, которые будут действительно информативны при анализе контекстуально близких слов. Конечно, такое решение будет означать, что при дальнейшем делении текста "окна" не будут строго равны по величине (в каких-то фрагментах оригинального текста, несомненно, будет больше или меньше служебных частей речи). Однако такое решение, несомненно, предпочтительнее, чем полный отказ от лемматизации.
```{r, warning=FALSE, message=FALSE}
udpipe_download_model(language = "russian-syntagrus")
syntagrus <- udpipe_load_model(file = "russian-syntagrus-ud-2.5-191206.udpipe")
annotated <- udpipe_annotate(syntagrus, all_books$Текст, Книга =  all_books$Книга)
annotated_tb <- as_tibble(annotated)

notion_words <- annotated_tb |>
  filter (upos %in% c("NOUN", "VERB", "ADJ", "PROPN")) 

nested <- notion_words |>
  select (doc_id, lemma) |>
  nest (lemmas = c(lemma)) 
```

```{r, warning=FALSE, message=FALSE}
slide_windows <- function(tbl, window_size) {
  skipgrams <- slider::slide(
    tbl, 
    ~.x, 
    .after = window_size - 1, 
    .step = 1, 
    .complete = TRUE
  )
  
  safe_mutate <- safely(mutate)
  
  out <- map2(skipgrams,
              1:length(skipgrams),
              ~ safe_mutate(.x, window_id = .y))
  
  out |> 
    transpose() |> 
    pluck("result") |> 
    compact() |> 
    bind_rows()
}

windowed_Justine <- nested |> 
  filter (doc_id == "doc1") |>
  mutate(lemmas = map(lemmas, slide_windows, 15L)) |> 
  unnest(lemmas) |>
  select (- doc_id)

pmi_tbl_Justine <- windowed_Justine  |> 
  pairwise_pmi(lemma, window_id) 
#без отрицательных значений
ppmi_tbl_Justine <- pmi_tbl_Justine |> 
  mutate(ppmi = case_when(pmi < 0 ~ 0, .default = pmi))
#сделаем матрицу менее разреженной при помощи SDV
word_emb_Justine <- ppmi_tbl_Justine |> 
  widely_svd(item1, item2, ppmi,
             weight_d = FALSE, nv = 100) |> 
  rename(word = item1)
```
















do with Durrell’s dwelling on sex in the four novels. [@tauer, 6] In the four novels we are predominantly in contact with the cosmopolitan society of the city,[@tauer, 6]

we get a glimpse of the darker side of life in Alexandria; when reading about the children’s brothel that Justine visits for example. [@tauer, 6]

The contrast with the fictional Alexandria explains après coup Durrell’s eagerness to leave the real and uninspiring Alexandria in order to write his own version [@herbrechter, 269].

Alexandria is more than once compared to a woman and more than once compared to Justine in particular, and the ambiguity that surrounds both is clear from the beginning. [@tauer, 8]

“It is not surprising that Durrell turned to Cavafy's poetry to enrich his Quartet; during his years in Alexandria, his state of mind in the atmosphere of the city was such that he must have felt an affinity with the Greek poet” (Katope 125-126).

What makes ‘big’ books is surely as much to do with their site as their characters and incidents. \[…\] When they are well and truly anchored in nature they usually become classics. \[…\] You could not transplant them without totally damaging their ambience and mood. \[…\] This has nothing I think to do with the manners and habits of the human beings who populate them; for they exist in nature, as a function of place. [@durrell, 163]

Darley sees himself and the others “\[…\] not as men and women any longer \[…\] but beings unconsciously made part of place, buried to the waist among the ruins of a single city, steeped in its values \[…\]” [@balthazar, 225].

Alexandria would not be Alexandria without its faded history, its cafés, brothels, cosmopolitan society and its beggars. [@tauer, 11]

::: {layout-ncol="2"}
![Александрия, Арабский квартал](https://i.pinimg.com/originals/a3/b3/bc/a3b3bc96dfe45f9b6e34495eae2dbf80.jpg){width="45%"}

![Александрия, отель "Сесиль"](https://i.pinimg.com/736x/d5/b3/c4/d5b3c4c3c2c729f4ba838d02d74ea1db.jpg){width="45%"}
:::
